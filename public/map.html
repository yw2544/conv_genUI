const mapHTML = `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Route Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
</head>
<body>
    <div id="map" style="width: 100%; height: 100vh;"></div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var map = L.map("map").setView([35.8617, 104.1954], 5); // 设置中国视角

            L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
                attribution: "© OpenStreetMap contributors"
            }).addTo(map);

            // 使用 Leaflet Routing Machine 画路线
            L.Routing.control({
                waypoints: [
                    L.latLng(39.9042, 116.4074), // 北京
                    L.latLng(31.2304, 121.4737)  // 上海
                ],
                routeWhileDragging: true
            }).addTo(map);
        });
    </script>
</body>
</html>

`;

const blob = new Blob([mapHTML], { type: "text/html" });
const url = URL.createObjectURL(blob);

document.getElementById("myIframe").src = url;
